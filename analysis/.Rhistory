timestamp = as.POSIXct(timestamp, origin = "1970-01-01", tz = "UTC"),
rank_at_timestamp = as.ordered(rank_at_timestamp))
h1_data %>%
group_by(timestamp) %>%
summarize(timestamp = unique(timestamp)) %>%
ungroup() %>%
arrange(timestamp) -> timestamp_ordering
timestamp_ordering$ts_id <- 1:dim(timestamp_ordering)[1]
h1_data %<>% inner_join(timestamp_ordering, by = "timestamp")
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line()
h1_data %>%
filter(ts_id %% 2 == 0)
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line()
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme(legend.position = "None")
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line()
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme(legend.position = "None")
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme(legend.position = "None")
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme(legend.position = "None")
library(ggpubr)
source("helpers.R")
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None")
source('C:/Users/naka9/Desktop/Arbeitsplatz/Digitale Muendigkeit/voting-protocols/hacker-news-analysis/analysis/helpers.R', echo=TRUE)
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None")
theme(plot.background = element_rect(color = "grey50", fill = "grey50"),
panel.background = element_rect(color = "grey30", fill = "grey30"),
panel.grid.major.x = element_line(color = "grey50", size = 2))
source('C:/Users/naka9/Desktop/Arbeitsplatz/Digitale Muendigkeit/voting-protocols/hacker-news-analysis/analysis/helpers.R', echo=TRUE)
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None")
source('C:/Users/naka9/Desktop/Arbeitsplatz/Digitale Muendigkeit/voting-protocols/hacker-news-analysis/analysis/helpers.R', echo=TRUE)
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None")
source('C:/Users/naka9/Desktop/Arbeitsplatz/Digitale Muendigkeit/voting-protocols/hacker-news-analysis/analysis/helpers.R', echo=TRUE)
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None")
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme(legend.position = "None")
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme(legend.position = "None")
source('C:/Users/naka9/Desktop/Arbeitsplatz/Digitale Muendigkeit/voting-protocols/hacker-news-analysis/analysis/helpers.R', echo=TRUE)
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None")
ggarrange(p1, p2, p3, n_col = 1)
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None") -> p1
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None") -> p2
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
theme_hn() +
theme(legend.position = "None") -> p3
ggarrange(p1, p2, p3, n_col = 1)
ggarrange(p1, p2, p3, n_col = 1, nrow = 3)
source('C:/Users/naka9/Desktop/Arbeitsplatz/Digitale Muendigkeit/voting-protocols/hacker-news-analysis/analysis/helpers.R', echo=TRUE)
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "Sampling Rate: 2 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p1
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "Sampling Rate: 4 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p2
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "Sampling Rate: 6 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p3
ggarrange(p1, p2, p3, n_col = 1, nrow = 3) + theme_hn()
ggarrange(p1, p2, p3, n_col = 1, nrow = 3)
ggarrange(p1, p2, p3, n_col = 1, nrow = 3) +
theme(plot.background = element_rect(color = "grey50", fill = "grey50"))
ggarrange(p1, p2, p3) +
theme(plot.background = element_rect(color = "grey50", fill = "grey50"))
ggarrange(p1, p2, p3, nrow = 3) +
theme(plot.background = element_rect(color = "grey50", fill = "grey50"))
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "2 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p1
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "4 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p2
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "6 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p3
ggarrange(p1, p2, p3, nrow = 1) +
theme(plot.background = element_rect(color = "grey50", fill = "grey50")) +
annotate_figure(top = "Development of Top 10 Stories for Different Sampling Rates")
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "2 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p1
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "4 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p2
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "6 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p3
ggarrange(p1, p2, p3, nrow = 1) +
annotate_figure(top = "Development of Top 10 Stories for Different Sampling Rates") +
theme(plot.background = element_rect(color = "grey50", fill = "grey50")) +
NULL
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "2 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p1
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "4 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p2
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "6 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p3
ggarrange(p1, p2, p3, nrow = 1) %>%
annotate_figure(top = "Development of Top 10 Stories for Different Sampling Rates") +
theme(plot.background = element_rect(color = "grey50", fill = "grey50")) +
NULL
ggarrange(p1, p2, p3, nrow = 1) %>%
annotate_figure(top = text_grob(label = "Development of Top 10 Stories for Different Sampling Rates",
color = "white",
size = 13)) +
theme(plot.background = element_rect(color = "grey50", fill = "grey50")) +
NULL
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "2 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p1
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 2 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "4 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p2
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
filter(ts_id %% 3 == 0) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
labs(title = "6 Minutes",
x = "Timestamp",
y = "Score") +
theme_hn() +
theme(legend.position = "None") -> p3
ggarrange(p1, p2, p3, nrow = 1) %>%
annotate_figure(top = text_grob(label = "Development of Top 10 Stories for Different Sampling Rates",
color = "white",
size = 15)) +
theme(plot.background = element_rect(color = "grey50", fill = "grey50")) +
NULL
theme(plot.background = element_rect(color = "#e5e5e5", fill = "#e5e5e5"),
plot.title = element_text(color = "white"),
panel.background = element_rect(color = "grey30", fill = "grey30"),
panel.grid.major.x = element_line(color = "grey50", size = 1),
panel.grid.minor.x = element_line(color = "grey50", size = 0.7),
panel.grid.major.y = element_line(color = "grey50", size = 1),
panel.grid.minor.y = element_line(color = "grey50", size = 0.7),
axis.title.x = element_text(color = "white"),
axis.title.y = element_text(color = "white"),
axis.text.x = element_text(color = "grey80"),
axis.text.y = element_text(color = "grey80"))
source('C:/Users/naka9/Desktop/Arbeitsplatz/Digitale Muendigkeit/voting-protocols/hacker-news-analysis/analysis/helpers.R', echo=TRUE)
plot_details <- theme_hn() +
labs(x = "Timestamp",
y = "Score") +
theme(legend.position = "None",
panel.grid.minor = element_blank())
plot_details <- theme_hn() +
theme(legend.position = "None",
panel.grid.minor = element_blank())
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
ggtitle("2 Minutes") +
labs(x = "Timestamp",
y = "Score") +
plot_details +
theme(legend.position = "None") -> p1
p1
source("helpers.R")
plot_details <- theme_hn() +
theme(legend.position = "None",
panel.grid.minor = element_blank())
h1_data %>%
filter(rank_at_timestamp <= 10) %>%
ggplot(aes(x = timestamp, y = score, color = id)) +
geom_point() +
geom_line() +
ggtitle("2 Minutes") +
labs(x = "Timestamp",
y = "Score") +
plot_details +
theme(legend.position = "None") -> p1
p1
24 * 30 * 500
log(1000, 1.8)
log(100, 1.8)
log(10, 1.8)
knitr::opts_chunk$set(echo = FALSE, message = FALSE)
library(tidyverse)
library(magrittr)
library(ggpubr)
source("helpers.R")
arrow::read_feather(file.path("..", "data", "hacker_news_newstories.feather"))
newstories <- arrow::read_feather(file.path("..", "data", "hacker_news_newstories.feather"))
newstories
newstories %<>%
mutate(story_id = as.factor(story_id),
timestamp = as.POSIXct(timestamp, origin = "1970-01-01", tz = "UTC"))
newstories
newstories <- arrow::read_feather(file.path("..", "data", "hacker_news_newstories2.feather"))
newstories
newstories %<>%
mutate(story_id = as.factor(story_id),
timestamp = as.POSIXct(timestamp, origin = "1970-01-01", tz = "UTC"),
rank = as.numeric(rank))
newstories
newstories %>%
filter(rank <= 30)
newstories %>%
filter(rank <= 30) -> newstories_toppage
newstories_toppage$story_id %>% unique()
newstories_toppage$story_id %>% unique() %>% n()
newstories_toppage$story_id %>% unique() %>% count()
newstories_toppage$story_id %>% unique() %>% length()
n_stories <- newstories_toppage$story_id %>% unique() %>% length()
viridis(n_stories)
viridis::viridis(n_stories)
color_scheme <- viridis::viridis(n_stories)
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id)) +
scale_color_discrete(color_scheme) +
geom_point() +
geom_line()
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id)) +
scale_color_discrete(color_scheme) +
geom_point() +
geom_line() +
scale_y_continuous(trans = "reverse")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id)) +
scale_color_discrete(color_scheme) +
geom_point() +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id)) +
scale_color_discrete(values = color_scheme) +
geom_point() +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id)) +
scale_color_discrete(breaks = color_scheme) +
geom_point() +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id)) +
scale_color_manual(values = color_scheme) +
geom_point() +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id, alpha = 30 - rank)) +
scale_color_manual(values = color_scheme) +
geom_point() +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id, alpha = 30 - rank)) +
scale_color_manual(values = color_scheme) +
geom_point(size = 1) +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id, alpha = 30 - rank)) +
scale_color_manual(values = color_scheme) +
geom_point(size = 2) +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None")
newstories <- arrow::read_feather(file.path("..", "data", "hacker_news_newstories2.feather"))
newstories %<>%
mutate(story_id = as.factor(story_id),
timestamp = as.POSIXct(timestamp, origin = "1970-01-01", tz = "UTC"),
rank = as.numeric(rank))
newstories %>%
filter(rank <= 50) -> newstories_toppage
n_stories <- newstories_toppage$story_id %>% unique() %>% length()
color_scheme <- viridis::viridis(n_stories)
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id, alpha = 30 - rank)) +
scale_color_manual(values = color_scheme) +
geom_point(size = 2) +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id, alpha = 30 - rank)) +
scale_color_manual(values = color_scheme) +
geom_point(size = 2) +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None") +
geom_hline(yintercept = 30, linetype = "dashed", color = "red")
newstories_toppage %>%
ggplot(aes(x = timestamp, y = rank, color = story_id, alpha = 30 - rank)) +
scale_color_manual(values = color_scheme) +
geom_point(size = 2) +
geom_line() +
scale_y_continuous(trans = "reverse") +
theme(legend.position = "None") +
geom_hline(yintercept = 30, linetype = "dashed", color = "red") +
theme_hn()
